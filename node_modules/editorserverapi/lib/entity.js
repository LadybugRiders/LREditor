"use strict";

var FileManager = require('./file_manager');

/**
* Entity
*
* @class Entity
* @constructor
* @param {string} root path
* @param {Express} express application
*/
var Entity = function(_root, _app) {
	/**
	* Root path
	*
	* @property root
	* @type string
	* @default "/editorserverapi/v0"
	*/
	this.root = "/editorserverapi/v0";
	if (typeof _root === "string") {this.root = _root};

	/**
	* Express application
	*
	* @property app
	* @type Express
	* @default null
	*/
	this.app = null;
	if (typeof _app === "function") {this.app = _app};
};

/**
* Entity key
*
* @property KEY
* @type string
* @default "entity"
*/
Entity.KEY = "entity";

/**
* Get the entity's path
*
* @method getPath
*/
Entity.prototype.getPath = function() {
	return this.root + '/' + Entity.KEY;
};

/**
* Routes the entity
*
* @method routing
*/
Entity.prototype.routing = function() {
	var instance = this;

	this.app.get(this.getPath(), function(req, res) {
		FileManager.Read(req, res, function(_req, _res) {
			_res.end();
		});
	});

	this.app.post(this.getPath(), function(req, res) {
		FileManager.Create(req, res, function(_req, _res) {
			_res.end();
		});
	});
};

module.exports = Entity;