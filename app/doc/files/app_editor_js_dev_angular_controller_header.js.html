<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app\editor\js\dev\angular\controller_header.js - LREditor API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="LREditor API"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Behaviour.Button.html">Behaviour.Button</a></li>
                                <li><a href="../classes/Behaviour.LR.Editor.Behaviour.ScrollerVertical.html">Behaviour.LR.Editor.Behaviour.ScrollerVertical</a></li>
                                <li><a href="../classes/Behaviour.ScrollerHorizontal.html">Behaviour.ScrollerHorizontal</a></li>
                                <li><a href="../classes/Behaviour.Trigger.html">Behaviour.Trigger</a></li>
                                <li><a href="../classes/Behaviour.TriggerChangeLevel.html">Behaviour.TriggerChangeLevel</a></li>
                                <li><a href="../classes/Behaviour.TriggerCutscene.html">Behaviour.TriggerCutscene</a></li>
                                <li><a href="../classes/Editor.AssetManager.html">Editor.AssetManager</a></li>
                                <li><a href="../classes/Editor.LevelImporterEditor.html">Editor.LevelImporterEditor</a></li>
                                <li><a href="../classes/Entity.BitmapText.html">Entity.BitmapText</a></li>
                                <li><a href="../classes/Entity.Button.html">Entity.Button</a></li>
                                <li><a href="../classes/Entity.Sprite.html">Entity.Sprite</a></li>
                                <li><a href="../classes/Entity.Text.html">Entity.Text</a></li>
                                <li><a href="../classes/Entity.TileSprite.html">Entity.TileSprite</a></li>
                                <li><a href="../classes/LR.Behaviour.html">LR.Behaviour</a></li>
                                <li><a href="../classes/LR.Body.html">LR.Body</a></li>
                                <li><a href="../classes/LR.CollisionManager.html">LR.CollisionManager</a></li>
                                <li><a href="../classes/LR.Game.html">LR.Game</a></li>
                                <li><a href="../classes/LR.GameObject.html">LR.GameObject</a></li>
                                <li><a href="../classes/LR.LevelExporter.html">LR.LevelExporter</a></li>
                                <li><a href="../classes/LR.LevelImporter.html">LR.LevelImporter</a></li>
                                <li><a href="../classes/LR.LevelImporterGame.html">LR.LevelImporterGame</a></li>
                                <li><a href="../classes/LR.LevelUtilities.html">LR.LevelUtilities</a></li>
                                <li><a href="../classes/LR.LR.html">LR.LR</a></li>
                                <li><a href="../classes/LR.State.html">LR.State</a></li>
                                <li><a href="../classes/LR.Utils.html">LR.Utils</a></li>
                                <li><a href="../classes/Misc.TriggerMessageObject.html">Misc.TriggerMessageObject</a></li>
                                <li><a href="../classes/Phaser.Plugin..Pollinator.html">Phaser.Plugin..Pollinator</a></li>
                                <li><a href="../classes/Phaser.Plugin.CutsceneManager.html">Phaser.Plugin.CutsceneManager</a></li>
                                <li><a href="../classes/Phaser.Plugin.DialogManager.html">Phaser.Plugin.DialogManager</a></li>
                                <li><a href="../classes/Phaser.Plugin.InputManager.html">Phaser.Plugin.InputManager</a></li>
                                <li><a href="../classes/Phaser.Plugin.PlayerSave.html">Phaser.Plugin.PlayerSave</a></li>
                                <li><a href="../classes/UI.DialogBox.html">UI.DialogBox</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: app\editor\js\dev\angular\controller_header.js</h1>
                        
                        <div class="file">
                            <pre class="code prettyprint linenums">
                        &quot;use strict&quot;;
                        
                        // get module LREditor.controllers
                        var LREditorCtrlMod = angular.module(&#x27;LREditor.controllers&#x27;);
                        
                        // create controller LoginCtrol in the module LREditor.controllers
                        LREditorCtrlMod.controller(&#x27;HeaderCtrl&#x27;, [&quot;$scope&quot;, &quot;$http&quot;, &quot;$modal&quot;, &quot;$timeout&quot;, 
                        	function($scope, $http, $modal, $timeout) {
                        	function main() {
                        		$scope.$on(&quot;sendImagesBroadcast&quot;, function(_event, _args) {
                        			if (_args.images) {
                        				$scope.images = _args.images;
                        			}
                        		});
                        
                        		$scope.$on(&quot;sendAtlasesBroadcast&quot;, function(_event, _args) {
                        			if (_args.atlases) {
                        				$scope.atlases = _args.atlases;
                        			}
                        		});
                        
                        		$scope.$on(&quot;importCutsceneBroadcast&quot;, function(_event, _args) {
                        			$scope.importCutscene();
                        		});
                        
                        		$scope.$on(&quot;openEditModalBroadcast&quot;, function(_event, _args) {
                        			$scope.openEditModal(_args.context,_args.varName,_args.isLong);
                        		});
                        
                        		$scope.$on(&quot;openPrefabsModalBroadcast&quot;, function(_event, _args) {
                        			$scope.managePrefabs();
                        		});
                        
                        		$scope.$on(&quot;sendCutscenesBroadcast&quot;, function(_event, _args) {
                        			$scope.setCutscenes(_args.cutscenes);
                        		});
                        
                        		$scope.$on(&quot;refreshCurrentEntityBroadcast&quot;, function(_event, _args) {
                        			$scope.currentEntity = _args.entity;
                        		});
                        
                        		//Receive settings from phaser when importing
                        		$scope.$on(&quot;sendSettingsBroadcast&quot;, function(_event, _args) {
                        			$scope.project.settings = jQuery.extend(true, {}, _args);
                        			$scope.modalSettingsData = jQuery.extend(true, {}, _args);
                        		});
                        		//When settings are modified in the modal
                        		$scope.$on(&quot;saveSettingsBroadcast&quot;, function(_event, _args) {
                        			$scope.project.settings = jQuery.extend(true, {}, _args);
                        		});
                        
                        		// tmp object (for modals for example)
                        		$scope.tmp = new Object();
                        
                        		// project data
                        		$scope.project = {
                        			name: &quot;Project&quot;,
                        		    path: &quot;/game&quot;,
                        		    file: &quot;project.json&quot;
                        		};
                        
                        		// project assets
                        		$scope.project.assets = new Object();
                        
                        		$scope.project.assets.levels = new Array();
                        		$scope.project.assets.images = new Array();
                        		$scope.project.assets.audios = new Object();
                        		$scope.project.assets.layers = new Object();
                        		$scope.project.assets.behaviours = new Array();
                        		$scope.project.assets.prefabs = new Array();
                        		$scope.project.assets.inputs = new Object();
                        		$scope.project.assets.bitmapFonts = new Array();
                        		$scope.project.assets.atlases = new Array();
                        
                        		$scope.project.settings = {
                        			world :{},
                        			camera : { x:0,y:0,width : 640, height : 340},
                        			ed_camera :{x : 0, y : 0},
                        			debugBodiesInGame : false
                        		};
                        
                        		//modal data for cutscenes edition
                        		$scope.modalCSData = {
                        			state : &quot;none&quot;,
                        			otherFuncs : Phaser.Plugin.CutsceneManager.otherFunctions,
                        			cutscenes : []
                        		};
                        
                        		//for text editing
                        		$scope.modalEditData = {
                        			edit_text : &quot;&quot;,
                        			context : null,
                        			varName : &quot;&quot;,
                        			isLong : false
                        		};
                        
                        		$scope.modalLayersData = { layers : {} };
                        		$scope.modalInputsData = { inputs : {} };
                        
                        		// load current project data
                        		if (localStorage) {
                        			var path = localStorage.getItem(&quot;project.path&quot;);
                        			var file = localStorage.getItem(&quot;project.file&quot;);
                        			if (path &amp;&amp; file) {
                        				$scope.project.path = path;
                        				$scope.project.file = file;
                        			}
                        
                        			$scope.loadCurrentProjectData();
                            } else {
                              console.warn(&quot;no localStorage&quot;);
                            }
                        	};
                        
                        	$scope.play = function() {
                        		var levelName = &quot;levelTmp&quot;;
                        		var storage = &quot;localstorage&quot;;
                        
                        		$scope.$emit(&quot;exportLevelEmit&quot;, {
                        			levelName: levelName,
                        			levelStorage: storage
                        		});
                        
                        		$timeout(function() {
                        			//var url = &quot;/game/#/home&quot;;
                        			var url = $scope.project.path;
                        			url += &quot;?levelname=&quot; + levelName;
                        			url += &quot;&amp;storage=&quot; + storage;
                        			var win = window.open(url, &#x27;_blank&#x27;);
                        	  		win.focus();
                        		}, 100);
                        	};
                        
                        	/************
                        	** PROJECT **
                        	************/
                        
                        	$scope.loadCurrentProjectData = function() {
                        		var url = &quot;/editorserverapi/v0/project&quot;;
                        		url += &quot;?name=&quot; + $scope.project.file;
                        		url += &quot;&amp;path=&quot; + $scope.project.path;
                        		$http.get(url).success(function(_data) {
                        			$scope.project.name = _data.name;
                        			$scope.project.projectFirstLevel = _data.firstLevel;
                        
                        			$timeout(function() {
                        				$scope.$emit(&quot;sendProjectEmit&quot;, {project: $scope.project});
                        			}, 100);
                        
                        			$scope.loadCurrentProjectPrefabs();
                        			$scope.loadCurrentProjectImages();
                        			$scope.loadCurrentProjectAtlases();
                        			$scope.loadCurrentProjectAudios();
                        			$scope.loadCurrentProjectBehaviours();
                        			$scope.loadCurrentProjectLayers();
                        			$scope.loadCurrentProjectInputs();
                        			$scope.loadCurrentProjectFonts();
                        			$scope.loadCurrentProjectLevels();
                        		}).error(function(_error) {
                        			console.error(_error);
                        		});
                        	};
                        
                        	$scope.changeCurrentProject = function() {
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/project.html&#x27;,
                        			controller: ProjectCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        			$scope.project = _data;
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	};
                        
                        	$scope.newLevel = function(){
                        		localStorage.setItem(&quot;project.newLevel&quot;, true);
                               	var win = window.open(&quot;.&quot;, &quot;_self&quot;);
                        	}
                        
                        	/***********
                        	** IMAGES **
                        	***********/
                        
                        	$scope.loadCurrentProjectImages = function() {
                        		LR.Editor.AssetManager.GetInstance().loadImages(
                        			&quot;/editorserverapi/v0/image&quot;,
                        			$scope.project.path + &quot;/assets/images&quot;,
                        			function(error, data) {
                        				if (error) {
                        					console.error(_error);
                        				} else {
                                			$scope.project.assets.images = $scope.project.assets.images.concat(data.images);
                        					$scope.$emit(&quot;sendImagesEmit&quot;, {images: $scope.project.assets.images});
                        				}
                        			}
                        		);
                        	};
                        
                        	$scope.manageImages = function() {
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/images.html&#x27;,
                        			controller: ImagesCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        			// do nothing
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	};
                        
                        	/************
                        	** ATLASES **
                        	************/
                        
                        	$scope.loadCurrentProjectAtlases = function() {
                        		var url = &quot;/editorserverapi/v0/atlas&quot;;
                        		url += &quot;?path=&quot; + $scope.project.path + &quot;/assets/atlases&quot;;
                        		$http.get(url).success(function(_data) {
                        			$scope.project.assets.atlases = _data.atlases;
                        
                        			$scope.$emit(&quot;sendAtlasesEmit&quot;, {atlases: $scope.project.assets.atlases});
                        		}).error(function(_error) {
                        			$scope.atlases = new Object();
                        			console.error(_error);
                        		});
                        	};
                        
                        	$scope.manageAtlases = function() {
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/atlases.html&#x27;,
                        			controller: AtlasesCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        			// do nothing
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	};
                        
                        	/***********
                        	** AUDIOS **
                        	***********/
                        
                        	$scope.loadCurrentProjectAudios = function() {
                        		var url = &quot;/editorserverapi/v0/audio&quot;;
                        		url += &quot;?path=&quot; + $scope.project.path + &quot;/assets/audios&quot;;
                        		$http.get(url).success(function(_data) {
                        			$scope.project.assets.audios = _data.audios;
                        
                        			$scope.$emit(&quot;sendAudiosEmit&quot;, {audios: $scope.project.assets.audios});
                        		}).error(function(_error) {
                        			$scope.audios = new Object();
                        			console.error(_error);
                        		});
                        	};
                        
                        	$scope.manageAudios = function() {
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/audios.html&#x27;,
                        			controller: AudiosCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        			// do nothing
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	};
                        
                        	/***********
                        	** LAYERS **
                        	***********/
                        	//Load the layers file and build/send the layers names array
                        	$scope.loadCurrentProjectLayers = function() {
                        		var url = &quot;/editorserverapi/v0/layers&quot;;
                        		url += &quot;?name=layers.json&quot;;
                        		url += &quot;&amp;path=&quot; + $scope.project.path + &quot;/assets/physics&quot;;
                        		$http.get(url).success(function(_data) {
                        			$scope.project.assets.layers = _data;
                        		    $scope.$emit(&quot;sendLayersEmit&quot;, {&quot;layers&quot;: $scope.project.assets.layers });
                        		}).error(function(_error) {
                        			$scope.layers = new Object();
                        			console.error(_error);
                        		});
                        	}
                        
                        	$scope.manageLayers = function() {
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/layers.html&#x27;,
                        			controller: LayersCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        			$scope.project.assets.layers = jQuery.extend(true, {}, _data);
                            		$scope.$emit(&quot;sendLayersEmit&quot;,{&quot;layers&quot; : _data });
                        			// save layers data in a file
                        			var url = &quot;/editorserverapi/v0/layers&quot;;
                        		    var params = {
                        		        name: &quot;layers.json&quot;,
                        		        path: $scope.project.path + &quot;/assets/physics&quot;,
                        		        data: JSON.stringify($scope.project.assets.layers)
                        		    };
                              	$http.post(url, params, function(error, data) {
                        	        if (error) {
                        	          console.error(error);
                        	        } else {
                        	          console.log(&quot;Layers saved!!&quot;);
                        	        }
                              	});
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	};
                        
                        	/***************
                        	** BEHAVIOURS **
                        	***************/
                        
                        	$scope.loadCurrentProjectBehaviours = function() {
                        		var url = &quot;/editorserverapi/v0/behaviour&quot;;
                        		url += &quot;?path=&quot; + $scope.project.path + &quot;/assets/behaviours&quot;;
                        		$http.get(url).success(function(_data) {
                        			$scope.project.assets.behaviours = _data.behaviours;
                        			$scope.loadCommonLRBehaviours();
                        			//$scope.$emit(&quot;sendBehavioursEmit&quot;, {behaviours: $scope.project.assets.behaviours});
                        		}).error(function(_error) {
                        			$scope.behaviours = new Object();
                        			console.error(_error);
                        		});
                        	}
                        
                        	//loads LR built in behaviours
                        	$scope.loadCommonLRBehaviours = function(){
                        		var url = &quot;/editorserverapi/v0/behaviour&quot;;
                        		url += &quot;?path=&quot; + $scope.project.path + &quot;/../shared/js/dev/phaser/behaviour/common&quot;;
                        		$http.get(url).success(function(_data) {
                        			$scope.project.assets.behaviours= $scope.project.assets.behaviours.concat( _data.behaviours );
                        			$scope.$emit(&quot;sendBehavioursEmit&quot;, {behaviours: $scope.project.assets.behaviours});
                        		}).error(function(_error) {
                        			$scope.behaviours = new Object();
                        			console.error(_error);
                        		});
                        	}
                        
                        	$scope.manageBehaviours = function() {
                        		// nothing to do
                        	};
                        
                        	/************
                        	** PREFABS **
                        	************/
                        
                        	$scope.loadCurrentProjectPrefabs = function() {
                        		var url = &quot;/editorserverapi/v0/prefab&quot;;
                        		url += &quot;?path=&quot; + $scope.project.path + &quot;/assets/prefabs&quot;;
                        		$http.get(url).success(function(_data) {
                        			$scope.project.assets.prefabs = _data.prefabs;
                        		}).error(function(_error) {
                        			$scope.project.assets.prefabs = new Array();
                        			console.error(_error);
                        		});
                        	};
                        
                        	$scope.managePrefabs = function() {
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/prefabs.html&#x27;,
                        			controller: PrefabsCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        			// do nothing
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	};
                        
                        	/***********
                        	** FONTS **
                        	***********/
                        
                        	$scope.loadCurrentProjectFonts = function() {
                        		var url = &quot;/editorserverapi/v0/bitmapfont&quot;;
                        		url += &quot;?path=&quot; + $scope.project.path + &quot;/assets/fonts&quot;;
                        		$http.get(url).success(function(_data) {
                        			$scope.project.assets.bitmapFonts = _data.fonts;
                        			$scope.$emit(&quot;sendBitmapFontsEmit&quot;,{bitmapFonts : $scope.project.assets.bitmapFonts});
                        		}).error(function(_error) {
                        			$scope.project.assets.bitmapFonts = new Array();
                        			console.error(_error);
                        		});
                        
                        	};
                        
                        	/***********
                        	** LEVELS **
                        	***********/
                        
                        	$scope.loadCurrentProjectLevels = function() {
                        		var url = &quot;/editorserverapi/v0/level&quot;;
                        		url += &quot;?path=&quot; + $scope.project.path + &quot;/assets/levels&quot;;
                        		$http.get(url).success(function(_data) {
                        			$scope.project.assets.levels = JSON.parse(JSON.stringify(_data.levels));
                        			
                        			// get level short paths
                        			for( var i=0; i &lt; $scope.project.assets.levels.length; i++ ){
                        				var level = $scope.project.assets.levels[i];
                        				var shortPath = level.path.substring(1);
                        				var extIndex = shortPath.indexOf(&quot;.json&quot;);
                        				if( extIndex &gt;= 0){
                        					shortPath = shortPath.substring(0,extIndex);
                        				}
                        				level.shortPath = shortPath;
                        			}
                        		}).error(function(_error) {
                        			$scope.project.assets.levels = new Array();
                        			console.error(_error);
                        		});
                        
                        	};
                        
                        	/***********
                        	** INPUTS **
                        	***********/
                        
                        	$scope.loadCurrentProjectInputs = function() {
                        		var url = &quot;/editorserverapi/v0/inputs&quot;;
                        		url += &quot;?name=inputs.json&quot;;
                        		url += &quot;&amp;path=&quot; + $scope.project.path + &quot;/assets/inputs&quot;;
                        		$http.get(url).success(function(_data) {
                        			$scope.project.assets.inputs = _data;
                        		}).error(function(_error) {
                        			$scope.project.assets.inputs = new Object();
                        			console.error(_error);
                        		});
                        	}
                        
                        	$scope.manageInputs = function() {
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/inputs.html&#x27;,
                        			controller: InputsCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        			// save inputs data in a file
                        			var url = &quot;/editorserverapi/v0/inputs&quot;;
                              var params = {
                                name: &quot;inputs.json&quot;,
                                path: $scope.project.path + &quot;/assets/inputs&quot;,
                                data: JSON.stringify($scope.project.assets.inputs)
                              };
                              $http.post(url, params, function(error, data) {
                                if (error) {
                                  console.error(error);
                                } else {
                                  console.log(&quot;Inputs saved!!&quot;);
                                }
                              });
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	};
                        
                        	/*********************
                        	 ** ADDING ENTITIES **
                        	 *********************/
                        
                        	$scope.addGroup = function() {
                        		$scope.$emit(&quot;addGroupEmit&quot;);
                        	};
                        
                        	$scope.addSprite = function() {
                        		$scope.$emit(&quot;addSpriteEmit&quot;);
                        	};
                        
                        	$scope.addTileSprite = function() {
                        		$scope.$emit(&quot;addTileSpriteEmit&quot;);
                        	};
                        
                        	$scope.addButton = function() {
                        		$scope.$emit(&quot;addButtonEmit&quot;);
                        	};
                        
                        	$scope.addText = function() {
                        		$scope.$emit(&quot;addTextEmit&quot;);
                        	};
                        
                        	$scope.addBitmapText = function() {
                        		$scope.$emit(&quot;addBitmapTextEmit&quot;);
                        	};
                        
                        	/*******************
                        	** LEVEL IMPORTER **
                        	*******************/
                        	//Save the current Level
                        	$scope.levelSave = function() {
                        		if($scope.project.level == null){
                        			$scope.levelExport();
                        			return;
                        		}
                        		var data = {
                        	      levelName: $scope.project.level.substring(1),
                        	      levelPath: $scope.project.path + &quot;/assets/levels&quot;,
                        	      levelStorage: &quot;file&quot;
                        	    };
                        		$scope.$emit(&quot;exportLevelEmit&quot;, data);
                        	};
                        
                        	$scope.levelImport = function() {
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/levelimport.html&#x27;,
                        			controller: LevelImportCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        			// send message to EditorCtrl
                        			$scope.$emit(&quot;importLevelEmit&quot;, _data);
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	};
                        
                        	/*******************
                        	** LEVEL EXPORTER **
                        	*******************/
                        
                        	$scope.levelExport = function() {
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/levelexport.html&#x27;,
                        			controller: LevelExportCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        			// send message to EditorCtrl
                        			$scope.$emit(&quot;exportLevelEmit&quot;, _data);
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	};
                        
                        	/******************
                        	** LEVEL DEFAULT **
                        	******************/
                        
                        	$scope.levelDefault = function() {
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/level_default.html&#x27;,
                        			controller: LevelDefaultCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        			// nothing to do
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	};
                        
                        
                        	/*******************
                        	** SETTINGS **
                        	*******************/
                        
                        	$scope.openSettings = function(){
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/settings_modal.html&#x27;,
                        			controller: SettingsCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	}
                        
                        	/*******************
                        	** CUTSCENE EDITOR **
                        	*******************/
                        
                        	$scope.openCutsceneEditor = function(){
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/cutscene_editor_modal.html&#x27;,
                        			controller: CutsceneEditorCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        		}, function () {
                        	        $scope.modalCSData.state = &quot;none&quot;;
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	}
                        
                        	$scope.exportCutscene = function(){		
                        		console.log($scope.cutscenesSave);
                        		//Tells the controller_phaser to store the modified cutscenes
                        		$scope.$emit(&quot;saveCutscenesEmit&quot;,{&quot;cutscenes&quot;:$scope.cutscenesSave});
                        	}
                        
                        	$scope.setCutscenes = function(_cutscenes){		
                        		//keep the original. only overwritten when saved
                        		$scope.cutscenesSave = _cutscenes;
                        
                        		//clone the array. we don&#x27;t want modifications to be done directly on the object
                        		$scope.modalCSData.cutscenes = jQuery.extend(true, [], _cutscenes);
                        	}
                        
                        	/*******************
                        	*******  HELP *******
                        	*******************/
                        
                        	$scope.help = function(){
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/help_modal.html&#x27;,/*
                        			controller: LevelExportCtrlModal,*/
                        			resolve: {
                        			}
                        		});
                        
                        		$scope.closeHelp = function() {modalInstance.dismiss();};
                        
                        		modalInstance.result.then(function (_data) {
                        			modalInstance.dismiss();
                        		}, function () {
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	}
                        
                        	/*
                        	* Opens the Edit Modal. At validation, this will modify the _textVarName varialbe of the _textContext
                        	*/
                        	$scope.openEditModal = function(_textContext, _textVarName, _isLong) {
                        
                        		$scope.modalEditData.edit_text = _textContext[_textVarName];
                        		$scope.modalEditData.context = _textContext;
                        		$scope.modalEditData.varName = _textVarName;
                        
                        		//if _isLong is true, the modal will propose a text area
                        		if( _isLong )
                        			$scope.modalEditData.isLong = _isLong;
                        		else
                        			$scope.modalEditData.isLong = false;
                        
                        		var modalInstance = $modal.open({
                        			scope: $scope,
                        			templateUrl: &#x27;partials/modals/edit_text_modal.html&#x27;,
                        			controller: EditTextCtrlModal,
                        			resolve: {
                        			}
                        		});
                        
                        		modalInstance.result.then(function (_data) {
                        			// clean modal data
                        			$scope.modalEditData.edit_text = &quot;&quot;;
                        			$scope.modalEditData.context = null;
                        			$scope.modalEditData.varName = &quot;&quot;;
                        		}, function () {
                        			// clean modal data
                        			$scope.modalEditData.context = null;
                        			console.info(&#x27;Modal dismissed at: &#x27; + new Date());
                        		});
                        	};
                        
                        	main();
                        }]);
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
