<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app\shared\js\dev\phaser\entity\bitmap_text.js - LREditor API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="LREditor API"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Behaviour.Button.html">Behaviour.Button</a></li>
                                <li><a href="../classes/Behaviour.LR.Editor.Behaviour.ScrollerVertical.html">Behaviour.LR.Editor.Behaviour.ScrollerVertical</a></li>
                                <li><a href="../classes/Behaviour.ScrollerHorizontal.html">Behaviour.ScrollerHorizontal</a></li>
                                <li><a href="../classes/Behaviour.Trigger.html">Behaviour.Trigger</a></li>
                                <li><a href="../classes/Behaviour.TriggerChangeLevel.html">Behaviour.TriggerChangeLevel</a></li>
                                <li><a href="../classes/Behaviour.TriggerCutscene.html">Behaviour.TriggerCutscene</a></li>
                                <li><a href="../classes/Editor.AssetManager.html">Editor.AssetManager</a></li>
                                <li><a href="../classes/Editor.LevelImporterEditor.html">Editor.LevelImporterEditor</a></li>
                                <li><a href="../classes/Entity.BitmapText.html">Entity.BitmapText</a></li>
                                <li><a href="../classes/Entity.Button.html">Entity.Button</a></li>
                                <li><a href="../classes/Entity.Sprite.html">Entity.Sprite</a></li>
                                <li><a href="../classes/Entity.Text.html">Entity.Text</a></li>
                                <li><a href="../classes/Entity.TileSprite.html">Entity.TileSprite</a></li>
                                <li><a href="../classes/LR.Behaviour.html">LR.Behaviour</a></li>
                                <li><a href="../classes/LR.Body.html">LR.Body</a></li>
                                <li><a href="../classes/LR.CollisionManager.html">LR.CollisionManager</a></li>
                                <li><a href="../classes/LR.Game.html">LR.Game</a></li>
                                <li><a href="../classes/LR.GameObject.html">LR.GameObject</a></li>
                                <li><a href="../classes/LR.LevelExporter.html">LR.LevelExporter</a></li>
                                <li><a href="../classes/LR.LevelImporter.html">LR.LevelImporter</a></li>
                                <li><a href="../classes/LR.LevelImporterGame.html">LR.LevelImporterGame</a></li>
                                <li><a href="../classes/LR.LevelUtilities.html">LR.LevelUtilities</a></li>
                                <li><a href="../classes/LR.LR.html">LR.LR</a></li>
                                <li><a href="../classes/LR.State.html">LR.State</a></li>
                                <li><a href="../classes/LR.Utils.html">LR.Utils</a></li>
                                <li><a href="../classes/Misc.TriggerMessageObject.html">Misc.TriggerMessageObject</a></li>
                                <li><a href="../classes/Phaser.Plugin..Pollinator.html">Phaser.Plugin..Pollinator</a></li>
                                <li><a href="../classes/Phaser.Plugin.CutsceneManager.html">Phaser.Plugin.CutsceneManager</a></li>
                                <li><a href="../classes/Phaser.Plugin.DialogManager.html">Phaser.Plugin.DialogManager</a></li>
                                <li><a href="../classes/Phaser.Plugin.InputManager.html">Phaser.Plugin.InputManager</a></li>
                                <li><a href="../classes/Phaser.Plugin.PlayerSave.html">Phaser.Plugin.PlayerSave</a></li>
                                <li><a href="../classes/UI.DialogBox.html">UI.DialogBox</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: app\shared\js\dev\phaser\entity\bitmap_text.js</h1>
                        
                        <div class="file">
                            <pre class="code prettyprint linenums">
                        &quot;use strict&quot;;
                        /**
                        * BitmapText class for webfonts
                        *
                        * @namespace Entity
                        * @class BitmapText
                        * @constructor
                        * @param {Phaser.Game} game
                        * @param {number} x
                        * @param {number} y
                        * @param {string} _key BitmapText to display
                        * @param {Object} _text Base text
                        * @param {Number} _size 
                        * @param {stirng} name Name of the GameObject attached
                        */
                        LR.Entity.BitmapText = function(_game, _x, _y, _key, _text, _size, _name) {
                        	
                        	Phaser.BitmapText.call(this, _game, _x, _y, _key, _text, _size);
                        	
                        	//this.anchor.setTo(0.5, 0.5);
                        
                        	this.go = new LR.GameObject(this);
                        	if (_name != null) {
                        		this.go.name = _name;
                        	} else {
                        		this.go.name = &quot;BitmapText&quot;;
                        	}
                        
                        	/**
                        	* String to apply before the text 
                        	*
                        	* @property prefix
                        	* @type {string}
                        	* @default &quot;&quot;
                        	*/
                        	this.prefix = &quot;&quot;;
                        	/**
                        	* String to apply after the text 
                        	*
                        	* @property suffix
                        	* @type {string}
                        	* @default &quot;&quot;
                        	*/
                        	this.suffix = &quot;&quot;;
                        
                        	/**
                        	* The context of the bounded variable ( if any )
                        	*
                        	* @property boundContext
                        	* @type {Object}
                        	* @default null
                        	*/
                        	this.boundContext = null;
                        
                        	/**
                        	* The name of the variable bound to this entity. 
                        	* The value of this variable will be displayed in this text, using prefix and suffix if they are set
                        	*
                        	* Set to null to stop listening to a variable
                        	*
                        	* @property boundVariable
                        	* @type {string}
                        	* @default null
                        	*/
                        	this.boundVariable = null;
                        
                        	/**
                        	* Defines the fixed count of digit you want if the text holds a number
                        	* ie : with numberPadding == 3 , 6 will be displayed as &quot;006&quot;
                        	*
                        	* a value of 0 deactivates the padding
                        	* @property numberPadding
                        	* @type number
                        	* @default 0
                        	*/
                        	this.numberPadding = 0;
                        
                        	/**
                        	* Maximum number of characters on a line
                        	* a value of 0 deactivates the wrapping
                        	*
                        	* @property maxCharPerLine
                        	* @type number
                        	* @default 0
                        	*/
                        	this._maxCharPerLine = 0;
                        
                        	this.lines = 0;
                        };
                        
                        LR.Entity.BitmapText.prototype = Object.create(Phaser.BitmapText.prototype);
                        LR.Entity.BitmapText.prototype.constructor = LR.Entity.BitmapText;
                        
                        Object.defineProperty(LR.Entity.BitmapText.prototype, &quot;maxCharPerLine&quot;, 
                        {
                        	get : function(){
                        		return this._maxCharPerLine;
                        	},
                        
                        	set : function (_value) {
                        		if( typeof _value == &quot;number&quot;){
                        			this._maxCharPerLine = _value;
                        			this.text = this.text;
                        		}
                        	}
                        });
                        
                        /**
                        * The defineProperty is overrided to enable auto number padding, prefix and suffix.
                        * @name LR.Entity.BitmapText#text
                        * @property {string} text - The text string to be displayed by this BitmapText object, taking into account the style settings.
                        */
                        Object.defineProperty(LR.Entity.BitmapText.prototype, &quot;text&quot;, 
                        	{
                        		get: function() {
                               		return this._text;
                            	},
                        
                        	    set: function(value) {
                        	    	if (value) {
                        		    	var _stringValue = value.toString();
                        		    	//check padding for number values
                        				if( typeof value == &quot;number&quot; &amp;&amp; this.numberPadding &gt; 0){
                        					_stringValue = this.pad( value, this.numberPadding );
                        				}
                        
                        				if( this.maxCharPerLine &gt; 0)
                        					_stringValue = this.wrapText(_stringValue);
                        
                        		        if (_stringValue !== this._text)
                        		        {
                        		            this._text = this.prefix + ( _stringValue || &#x27; &#x27; ) + this.suffix ;
                        		            this.dirty = true;
                        		            this.updateTransform();
                        		        }
                        		    }
                        		}
                        	}
                        ); 
                        
                        // Called when the scene is launching. All objects are created then.
                        LR.Entity.BitmapText.prototype.start = function() {
                        	if (this.go) {
                        		this.go.start();
                        	}
                        };
                        
                        LR.Entity.BitmapText.prototype.update = function() {
                        	Phaser.BitmapText.prototype.update.call(this);
                        	if (this.go) {
                        		if (this.exists) {
                        			this.go.update();
                        		}
                        	}
                        	//display bound variable
                        	if( this.boundVariable != null ){
                        		var value = this.boundContext[this.boundVariable];
                        		this.text = value ;
                        	}
                        };
                        
                        LR.Entity.BitmapText.prototype.postUpdate = function() {
                        	Phaser.BitmapText.prototype.postUpdate.call(this);
                        	if (this.go) {
                        		if (this.exists) {
                        			this.go.postUpdate();
                        		}
                        	}
                        };
                        
                        LR.Entity.BitmapText.prototype.render = function() {
                        	Phaser.BitmapText.prototype.render.call(this);
                        	if (this.go) {
                        		this.go.render();
                        	}
                        };
                        
                        LR.Entity.BitmapText.prototype.destroy = function() {
                        	if (this.go) {
                        		this.go.destroy();
                        	}
                        	Phaser.BitmapText.prototype.destroy.call(this);
                        };
                        
                        /**
                        * Tells this text entity to display the specified variable.
                        * This will be effective even if the variable value changes.
                        *
                        * @method bindToVariable
                        * @param {string} variableName The name of the variable to bind
                        * @param {Object} context The context holding the variable
                        * @param {string} prefix String to apply before the variable value
                        * @param {string} suffix String to apply after the variable value
                        */
                        LR.Entity.BitmapText.prototype.bindToVariable = function(_variableName,_context,_prefix,_suffix) {
                        	this.boundVariable = _variableName;
                        	this.boundContext = _context;
                        	if( _prefix != null )
                        		this.prefix = _prefix;
                        	if( _suffix != null )
                        		this.suffix = _suffix;
                        };
                        
                        LR.Entity.BitmapText.prototype.pad = function(num, size) {
                            var s = num+&quot;&quot;;
                            while (s.length &lt; size) s = &quot;0&quot; + s;
                            return s;
                        }
                        
                        LR.Entity.BitmapText.prototype.wrapText = function(_string){	
                        	if( _string.length &lt; this.maxCharPerLine)
                        		return _string;
                        	
                        	var s = &quot;&quot;;
                        	var array = _string.split(&quot; &quot;);
                        	var i=0;
                        	var count = 0;
                        	this.lines = 0;
                        	while( i&lt; array.length ){
                        		var word = array[i];
                        		i++;
                        		var newLineIndex = word.indexOf(&quot;\n&quot;);
                        		if(newLineIndex &gt;= 0){
                        			count = word.length - newLineIndex + 1;
                        		}else{
                        			count += word.length + 1;
                        		}
                        
                        		if( count &gt;= this.maxCharPerLine &amp;&amp; i &lt; array.length){
                        			count = 0;
                        			s += &quot;\n&quot;;
                        			this.lines ++;
                        		}
                        
                        		if(i &lt; array.length) word += &quot; &quot;;
                        
                        		s+=word;
                        	}
                        	return s;
                        }
                            </pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
